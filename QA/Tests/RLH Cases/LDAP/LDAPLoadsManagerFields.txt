 
*** Settings ***
| Documentation		| Test that only the LDAP Import of Custodians via the Custodian Creator properly associate Custodians with their Manager Information
| Metadata		| Authors	| Aaron Spruill	| William Sehy
| Force Tags		| manual	| in-progress	| sprint-9	| uaa488	| team.method
| Suite Setup		| Log	| This is the suite setup keyword.
| Test Setup		| Open Browser | ${ROOT}
| Test Teardown 	| Close All Browsers
| Suite Teardown	| Log	| This is the suite teardown keyword.


*** Variables ***

| ${LDAPDomain}		| testing.corp
| ${LDAPUsername}	| rellockdown
| ${LDAPPassword}	| P@ssw0rd@1


*** Test Cases ***

| 1. Custodian Creator successfully imports Custodian's information and their Manager information from LDAP
| | [Documentation]	| Verify that a Custodian's Manager information can be imported with the LDAP import/Custodian Creator
| | Run the following manual steps:
| | ... | Pre-conditions:
| | ... | 1. Given that a NEW Custodian (Custodian) exists in LDAP ***WITH a valid, associated Manager***.
| | ... | 2. Given that Overwrite Fields on Import is set to No
| | ... | 
| | ... | Steps:
| | ... | 1. Add Custodian from LDAP
| | ... | 
| | ... | Expected Results:
| | ... | 1. Load Custodian Job completes without Errors
| | ... | 2. New Custodian is now in the Custodian/Custodian list
| | ... | 3. New Custodian has the correct Manager


| 2. Custodian Creator successfully imports Custodian's information when Manager field is empty in LDAP
| | [Documentation]	| Verify that a Custodian's information is imported and not haulted if they have no manager in LDAP
| | Run the following manual steps:
| | ... | Pre-conditions:
| | ... | 1. Given that a NEW Custodian (Custodian) exists in LDAP but with ***no data in the Manager's field***.
| | ... | 2. Given that Overwrite Fields on Import is set to No
| | ... | 
| | ... | Steps:
| | ... | 1. Add Custodian from LDAP
| | ... | 
| | ... | Expected Results:
| | ... | 1. Load Custodian Job completes without Errors
| | ... | 2. New Custodian is now in the Custodian/Custodian list
| | ... | 3. New Custodian has NO Manager


| 3. Custodian Creator does not overwrite manually entered Custodian Manager data with LDAP Custodian Manager data during import
| | [Documentation]	| Verify that an existing Custodian's Manager information is not overwritten by LDAP Manager data upon
| | ... 		| LDAP import.
| | Run the following manual steps:
| | ... | Pre-conditions:
| | ... | 1. Given that an ***existing (Manually created) Custodian with Manager data*** exists in Method
| | ... | 2. Given that a ***matching Custodian with Manager data*** exists in LDAP
| | ... | 3. Given that Overwrite Fields on Import is set to No
| | ... | 
| | ... | Steps:
| | ... | 1. Add Custodian from LDAP
| | ... | 
| | ... | Expected Results:
| | ... | 1. Load Custodian Job completes without Errors
| | ... | 2. Custodian is still in the Custodian/Custodian list
| | ... | 3. Custodian has the same Manager as before the import


| 4. Custodian Creator does not overwrite an existing Custodian's Manager data with LDAP Custodian Manager data during import even if the existing field is blank
| | [Documentation]	| Verify that an existing Custodian's Manager information is not overwritten by LDAP Manager data upon
| | ... 		| LDAP import even if the existing Custodian's Manager information was empty.
| | Run the following manual steps:
| | ... | Pre-conditions:
| | ... | 1. Given that an ***existing (Manually created) Custodian with NO Manager data*** exists in Method
| | ... | 2. Given that a ***matching Custodian with Manager data*** exists in LDAP
| | ... | 3. Given that Overwrite Fields on Import is set to No
| | ... | 
| | ... | Steps:
| | ... | 1. Add Custodian from LDAP
| | ... | 
| | ... | Expected Results:
| | ... | 1. Load Custodian Job completes without Errors
| | ... | 2. Custodian is still in the Custodian/Custodian list
| | ... | 3. Custodian has NO Manager


| 5. Escalate a Communication to an LDAP imported Custodian
| | [Documentation]	| Verify an escalation is sent to a Custodian's Manager after they are created by the Custodian Creator
| | Run the following manual steps:
| | ... | Pre-conditions:
| | ... | 1. Given that a Custodian1 and their Manager information was imported from LDAP
| | ... | 2. Given that a Custodian1 is linked to a Sent Communication that requires Acknowledgement and is not Acknowledged by the Custodian
| | ... | 3. Given that we are viewing the Communication
| | ... | 
| | ... | Steps:
| | ... | 1. Click button	| Escalate
| | ... | 2. Select Custodian from the Available Items list	| Custodian1
| | ... | 3. Click		| Update Selection
| | ... | 4. Click		| Set Selection
| | ... | 
| | ... | Expected Results:
| | ... | Manager receives Escalation Communication about Custodian


*** Keywords ***

| Create Basic Method LDAP Mapping
| | [Documentation]	| Go to the Projects > Configuration tab and map LDAP fields to Method Custodian fields
| | [ARGUMENTS]		| ${empty}
| | Select Tab		| Projects
| | Select Sub-Tab	| Configuration
| | Click the Button	| LDAP Settings
| | Map the Fields	| Objectguid	| Unique ID
| | Map the Fields	| name		| First Name
| | Map the Fields	| sn		| Last Name
| | Map the Fields	| mail		| Email
| | Map the Fields	| countrycode	| Department
| | Click the Button	| Save

| Configure LDAP with the Following Values
| | Run the following manual steps:
| | ... | 1. Click			| Edit
| | ... | 2. Enter the LDAP Domain	| testing.corp
| | ... | 3. Enter the LDAP Username	| rellockdown
| | ... | 4. Enter the LDAP Password	| P@ssw0rd@1
| | ... | 5. Click			| Save

| Map the Fields
| | [Documentation]	| Map LDAP fields from the left column to Method fields in the right column
| | [ARGUMENTS]		| @{LDAPField}	| @{MethodField}
| | Double-Click	| ${LDAPField}	
| | Double-Click	| ${MethodField}	

| Remove all Custodians
| | [Documentation]	| Map LDAP fields from the left column to Method fields in the right column
| | [ARGUMENTS]		| @{empty}
| | Select Tab			| Custodian
| | Select from Dropdown	| All x-number
| | Select from Dropdown	| Delete
| | Select the Button		| Go

| Add Custodian from LDAP
| | [Documentation]	| Map LDAP fields from the left column to Method fields in the right column
| | [ARGUMENTS]		| @{empty}
| | Select Tab		| Projects
| | Select Sub-Tab	| Configuration
| | Click the Button	| LDAP Settings
| | Click the Button	| Load Custodian


*** Settings ***
| Library  | ${KEYWORD_DIR}/ManualKeywords.py
| Library  | ${KEYWORD_DIR}/kWebDriver.py
| Resource | ${KEYWORD_DIR}/Relativity/Shared/RelativityKeywords.txt
| Resource | ${METHOD_KEYWORDS}