
*** Settings ***
| Documentation 	| Verify that the Map Fields step of Integration Points shows the correct error messages, and that the record can be saved after correcting the errors.
| Metadata			| Authors	| Daniel Oliver	| William Sehy
| Force Tags		| in-progress	| team.method	| manual
#| Suite Setup		| Open and Log in to Method
#| Test Setup		| Go to Step 3 of the Create Integration Point Process
#| Test Teardown 	| Capture screenshot if test fails
#| Suite Teardown	| Close all browsers


*** Variables ***

| ${WorkspaceName}				| Relativity Legal Hold
| ${WorkspaceFieldListID}		| workspace-fields
| ${SelectedFieldListID}		| selected-workspace-fields
| ${SelectedAttributeListID}	| selected-source-fields
| ${SourceAttributeListID}		| source-fields


*** Test Cases ***

| The message "The overlay identifier must be mapped." is displayed under the correct conditions
| | [Documentation]	| Verify that when the Selected Overlay identifier is not in the Selected Field list and Save is clicked, that the message 
| | ...				|  "The overlay identifier must be mapped." is displayed.
| | ...				| [id] 111dce70-a89f-11e4-9581-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Move one field to the Selected Source Attributes list
| | ... | 3. Have a different field selected in the Overlay Identifer than the field in the Selected Workspace Fields list
| | ... | 4. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the message "The overlay identifier field must be mapped." is displayed


| Saving post "The overlay identifier must be mapped." message works by adding the Overlay Identifier to the Selected list
| | [Documentation]	| Verify that the Integration Point can be saved after the "The overlay identifier must be mapped." message is displayed by adding the Overlay Identifier to the Selected Lists.
| | ...				| [id] 11208d91-a89f-11e4-be39-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Move one field to the Selected Source Attributes list
| | ... | 3. Have a different field selected in the Overlay Identifer than the field in the Selected Workspace Fields list
| | ... | 4. Click Save
| | ... | 5. Move the the Overlay Identifier field to the Selected Workspace Fields list
| | ... | 6. Move another field to the Selected Source Attributes list
| | ... | 7. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the Integration Point detail view is shown


| Saving Post "The overlay identifier must be mapped." message is displayed works by changing the Overlay value
| | [Documentation]	| Verify that the Integration Point can be saved after the "The overlay identifier must be mapped." message is displayed works by changing the Overlay value
| | ...				| [id] 11208d92-a89f-11e4-8a6c-b8ca3a83048f
| | [Tags]			| dao049
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Move one field to the Selected Source Attributes list
| | ... | 3. Have a different field selected in the Overlay Identifer than the field in the Selected Workspace Fields list
| | ... | 4. Click Save
| | ... | 5. Map the RDO's identifier and add another Source Attribute
| | ... | 6. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the Integration Point detail view is shown
 

| The message "All selected items have not been mapped." is displayed under the correct conditions for too few Workspace Fields
| | [Documentation]	| Verify that when the selected fields count is less than the selected attributes count, that the message "All selected items have not been mapped." is displayed.
| | ...				| [id] 11208d93-a89f-11e4-8ca7-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Source Attributes list
| | ... | 2. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the message "All selected items have not been mapped." is displayed


| The message "All selected items have not been mapped." is displayed under the correct conditions for too many Workspace Fields
| | [Documentation]	| Verify that when the selected fields count is greater than the selected attributes count, that the message "All selected items have not been mapped." is displayed.
| | ...				| [id] 11208d94-a89f-11e4-ba1a-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the message "All selected items have not been mapped." is displayed


| Saving post "All selected items have not been mapped." message
| | [Documentation]	| Verify that the Integration Point can be saved after the "All selected items have not been mapped." message is displayed
| | ...				| [id] 11208d95-a89f-11e4-86c5-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Click Save
| | ... | 3. Move one field to the Selected Source Attributes list
| | ... | 4. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the Integration Point detail view is shown


| When the conditions for both invalid messages are met, both messages are displayed
| | [Documentation]	| Verify that the conditions are met for both messages (Overlay not mapped, and Uneven field count), that both messages are displayed.
| | ...				| [id] 11208d96-a89f-11e4-826e-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Have a different field selected in the Overlay Identifer than the field in the Selected Workspace Fields list
| | ... | 3. Click Save
| | ... |
| | ... | Expected Results:
| | ... | 1. Verify that the message "All selected items have not been mapped." is displayed
| | ... | 2. Verify that the message "The object identifier field must be mapped." is displayed


| When the conditions for both invalid messages are met and then the initial message is cleared, the second message can be displayed
| | [Documentation]	| Verify that the conditions are met for both messages (Overlay not mapped, and Uneven field count), 
| | ...				| and then the the user makes adjustments to remove the "All selected items have not been mapped" message and clicks Save, 
| | ...				| that the "The overlay identifier must be mapped." message is displayed.
| | ...				| [id] 11208d97-a89f-11e4-932f-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Move one field to the Selected Workspace Fields list
| | ... | 2. Have a different field selected in the Overlay Identifer than the field in the Selected Workspace Fields list
| | ... | 3. Click Save
| | ... | 4. Move one field to the Selected Source Attributes list
| | ... | 5. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the message "The overlay identifier must be mapped." is displayed


| Clicking Save with no fields mapped shows the "The overlay identifier must be mapped." message
| | [Documentation]	| Verify that clicking Save with no fields mapped shows the "The overlay identifier must be mapped." message.
| | ...				| [id] 11208d98-a89f-11e4-a8d3-b8ca3a83048f
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the message "The overlay identifier field must be mapped." is displayed


| A Mapping cannot be Saved while Parent Attribute's value is Select...
| | [Documentation] | Verify that Mappings cannot be Saved while Parent Attribute's value is "Select...".
| | [Tags]			| manual	| dan650
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Go to step 3 using the Destination RDO of Custodian Role
| | ... | 2. Create an otherwise valid Mapping, but leave Parent Attribute as "Select..."
| | ... | 3. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the Parent Attribute field throws the following error: "The Parent Attribute is required."


| A Mapping can be Saved after the Parent Attribute's validation
| | [Documentation] | Verify that Mappings can be Saved after Parent Attribute's validation was triggered.
| | [Tags]			| manual
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Go to step 3 using the Destination RDO of Custodian Role
| | ... | 2. Create an otherwise valid Mapping, but leave Parent Attribute as "Select..."
| | ... | 3. Click Save
| | ... | 4. Wait until the Parent Attribute field throws the its error
| | ... | 5. Select any Parent Attribute besides "Select..."
| | ... | 6. Click Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the Integration Point is saved with the given Parent Attribute


| Integration Points can be created when Parent Attribute is hidden
| | [Documentation] | Verify that when the Parent Attribute list hidden, that the Create Integration Point Process can be completed.
| | ...				| [id] 10e61ca1-a89f-11e4-8dcb-b8ca3a83048f
| | [Tags]			| manual
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Go to step 3 using the Destination RDO of Custodian Role
| | ... | 2. Complete the required fields for this screen
| | ... | 3. Click | Save
| | ... |
| | ... | Expected Results:
| | ... | Verify that the IP has been created.


*** Keywords *** 

| Go to Step 3 of the Create Integration Point Process
| | Open Create Integration Point
| | Fill out the Following Fields of the Integration Point Step 1 form	| Generic Selectable Field tests	| Append/Overlay	| LDAP	| Custodian	| No
| | Click	| Next
| | Fill out the Following Fields of the Integration Point Step 2 form	| ${ValidConnectionPath}
| | Click	| Next


*** Settings ***
| Library	| Collections
| Library	| ${KEYWORD_DIR}/ManualKeywords.py
| Library	| ${KEYWORD_DIR}/kWebDriver.py
| Resource	| ${METHOD_KEYWORD_DIR}/MiscMethodKeywords.txt
| Resource	| ${METHOD_KEYWORD_DIR}/NavigationKeywords.txt
| Resource	| C:/SourceCode/LDAPSync/QA/Keywords/IntegrationPointKeywords.txt