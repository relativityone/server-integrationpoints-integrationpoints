
*** Settings ***
| Documentation 	| Verify that the Overlay Identifier dropdown has the correct field choices for each Object Type.
| Metadata			| Authors	| Daniel Oliver	| William Sehy
| Force Tags		| in-progress	| team.game_of_holds	| feature.integration_points
| Suite Setup		| Run Keywords	| Open and Log in to Method	| Make the Object Type List a Suite Variable
#| Test Setup		| Go to Step 3 of the Create Integration Point Process
| Test Teardown 	| Capture screenshot if test fails
| Suite Teardown	| Close All Browsers


*** Variables ***

| ${WorkspaceName}	| LDAP Sync
| ${Overlay Identifier Dropdown}	| s2id_overlay-identifier


*** Test Cases ***

| The Options on the Overlay Identifier dropdown are correct for all Object Types
| | [Documentation] | Verifies that the list of possible Overlay Identifiers on Step 3 is correct for every Non-System Object Type in the current Workspace.
| | ...				| [id] 10b807c0-a89f-11e4-82d4-b8ca3a83048f
| | [Tags]			| automated
| | [Template]		| Verify that the Overlay Identifier dropdown populates the correct fields for the Object Type "${ObjectType}"
| | :FOR	| ${ObjectType}	| IN	| @{ObjectTypes}
| | | ${ObjectType}


*** Keywords *** 

| Verify that the Overlay Identifier dropdown populates the correct fields for the Object Type "${ObjectType}"
| | [Documentation]	| Goes through the Integration Point wizard to get to step 3, choosing the given Object Type as the Destination RDO on Step 1, 
| | ...				| then verifies that the correct fields are listed in the Overlay Identifier dropdown on Step 3.
| | Wait Until Keyword Succeeds	| 10s	| 2s	| Open Create Integration Point
| | Fill out the Following Fields of the Integration Point Step 1 form	| IntegrationName=${ObjectType} Overlay Fields Test	| Overwrite=Append	| SourceProvider=LDAP	| DestinationRDO=${ObjectType}	| EnableScheduler=No
| | Proceed to the Next Step of the Integration Point wizard
| | Fill out the Following Fields of the LDAP Integration Point Step 2 form	| 
| | ... | ConnectionPath=testing.corp/CN=Users,DC=testing,DC=corp	| 
| | ... | ObjectFilterString=(objectClass=*)		| 
| | ... | Authentication=FastBind					| 
| | ... | ConnectionUsername=testing\\administrator	| 
| | ... | ConnectionPassword=P@ssw0rd@1				| 
| | ... | ImportNestedItems=Yes
| | Proceed to the Next Step of the Integration Point wizard
| | Click	| ${Overlay Identifier Dropdown}
| | @{ExpectedFields}=	| Get the Non-System Fields for the following Object Type	| ${ObjectType}
| | Run Keyword If		| "${ObjectType}" == "Custodian"	| Remove Values From List	| ${ExpectedFields}	| Full Name
| | ${UniqueIdentifier}=	| Determine the RDO Identifier Field on the following Object Type	| ${ObjectType}
| | ${Index}= | Get Index From List | ${ExpectedFields} | ${UniqueIdentifier}
| | Run Keyword Unless	| "${ObjectType}" == "Custodian"	| Set List Value | ${ExpectedFields} | ${Index} | ${UniqueIdentifier} [Object Identifier]
| | Verify that the currently opened select2 Dropdown has the following choices in order	| @{ExpectedFields}
| | [Teardown]		| Run Keyword If Keyword Failed	| Capture Page Screenshot

| Make the Object Type List a Suite Variable
| | [Documentation]	| Creates and populates the Object Type list with all Non-System Object Types in the current Workspace, then makes it a Suite variable.
| | @{ObjectTypeList}=	| Get a List of All Non-System Object Types in the Workspace
#| | @{ObjectTypeList}=	| Create List	| 
#| | ... | Custodian
| | Set Suite Variable	| ${ObjectTypes}	| ${ObjectTypeList}


*** Settings ***
| Library	| Collections
| Library	| ${KEYWORD_DIR}/kWebDriver.py
| Resource	| ${LEGAL_HOLD_KEYWORD_DIR}/MiscMethodKeywords.txt
| Resource	| ${LEGAL_HOLD_KEYWORD_DIR}/NavigationKeywords.txt
| Resource  | ${LDAP_KEYWORD_DIR}/DatabaseKeywords.txt
| Resource	| ${LDAP_KEYWORD_DIR}/IntegrationPointKeywords.txt
