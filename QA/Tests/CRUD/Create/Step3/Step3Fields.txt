*** Settings ***
| Documentation 	| Verify that the Map Fields step of Integration Points shows the correct fields
| Metadata		    | Authors	| Daniel Oliver
| Force Tags		| in-progress | team.method
| Suite Setup		| Open and Log in to Method
| Test Setup        | Go to Step 3 of the Create Integration Point Process
| Test Teardown 	| Capture screenshot if test fails
| Suite Teardown	| Close all browsers

*** Variables ***

| ${WorkspaceName}	     | Relativity Legal Hold
| ${ValidConnectionPath} | 
| ${OverlayIdentifierID} | 
| ${WorkspaceFieldListID}   | workspace-fields
| ${SelectedFieldListID}    | selected-workspace-fields
| ${SelectedAttributeListID}    | selected-source-fields
| ${SourceAttributeListID}      | source-attributes
| ${AddAllWorkspaceFieldsIcon}   | add-all-workspace-fields
| ${AddWorkspaceFieldIcon}       | add-workspace-field
| ${RemoveWorkspaceFieldIcon}    | remove-workspace-field
| ${RemoveWAllWorkspaceFieldsIcon} | remove-all-workspace-fields
| ${MoveWorkspaceFieldUpIcon}        | workspace-field-up
| ${MoveWorkspaceFieldDownIcon}      | workspace-field-down
| ${AddAllSourceFieldsIcon}   | add-all-source-fields
| ${AddSourceFieldIcon}       | add-workspace-field
| ${RemoveSourceFieldIcon}    | remove-source-field
| ${RemoveAllSourceFieldsIcon} | remove-all-source-fields

*** Test Cases ***

| Clicking Next from the Connect to Source screen shows the Map Fields screen
| | [Documentation]	| Verify that clicking Next from the Connect to Source screen shows the Map Fields screen
| | [Tags] | untested
| | Wait until keyword succeeds | 20s | 2s | Verify that the Header has the following text | Map Fields

| The Set Connection fields are in the correct order
| | [Documentation]	| Verify that the fields in the Source Connection section are sorted correctly.
| | [Tags] | untested
| | Verify that the following section contains the following fields | Field Mappings | ${WorkspaceFieldListID} | ${SelectedFieldListID}  | ${SelectedAttributeListID} | ${SourceAttributeListID}

| The Overlay Identifer is a Required Field
| | [Documentation]	| Verify that the Required Field indicator is present for the  Overlay Identifer field.
| | [Tags] | untested
| | Verify that the following field is required | ${OverlayIdentifierID}

| The Fields are of the correct type
| | [Documentation]	| Verify that the Fields are the correct type
| | [Tags]		| untested	
| | Run keyword and continue on failure | Verify that the following field ID has a listbox input | ${WorkspaceFieldListID}
| | Run keyword and continue on failure | Verify that the following field ID has a listbox input | ${SelectedFieldListID} 
| | Run keyword and continue on failure | Verify that the following field ID has a listbox input | ${SelectedAttributeListID} 
| | Run keyword and continue on failure | Verify that the following field ID has a listbox input | ${SourceAttributeListID}
| | Run keyword and continue on failure | Verify that the following field ID has a droplist input | ${OverlayIdentifierID}

| Workspace Buttons are present and sorted correctly
| | [Documentation]	| Verify that the Workspace movement Buttons present and sorted correctly
| | [Tags]		| untested	
| | Verify that the following icons are present and sorted correctly | ${AddAllWorkspaceFieldsIcon} | ${AddWorkspaceFieldIcon}  | ${RemoveWorkspaceFieldIcon} | ${RemoveWAllWorkspaceFieldsIcon}

| Source Attribute Buttons are present and sorted correctly
| | [Documentation]	| Verify that the Source Attributes movement Buttons present and sorted correctly
| | [Tags]		| untested	
| | Verify that the following icons are present and sorted correctly | ${AddAllSourceFieldsIcon} | ${AddSourceFieldIcon}  | ${RemoveSourceFieldIcon} | ${RemoveAllSourceFieldsIcon}

| Up and Down Buttons are present and sorted correctly
| | [Documentation]	| Verify that the Up and Down movement Buttons present and sorted correctly
| | [Tags]		| untested	
| | Verify that the following icons are present and sorted correctly | ${MoveWorkspaceFieldUpIcon} | ${MoveWorkspaceFieldDownIcon}

#----------------New Suite for OVerlay ----------------------------------

| The Overlay Identifier list has the correct values per RDO
| | [Documentation]	| Verify that the Overlay Identifier List has the correct options, i.e. all Fixed Length Text fields that are both non system and not relational
| | [Tags] | untested	
| | Click  | ${OverlayIdentifierID}
| | Verify that the currently opened select2 Dropdown has the following choices in order |

| The Overlay Identifier defaults to the RDO Identifier

| The Overlay Identifier for the Custodian RDO defaults to UniqueID

#-------------------Mappable Fields --------------------

| The selected Overlay must be mapped; error "The overlay identifier must be mapped."

| Uneven number of selected fields in both columns:  "All selected items have not been mapped."

| System Fields are hidden

| Single Object fields are hidden

| Multi Object fields are hidden

| Going from Step 3 to Step 2 and back to Step 3 preserves field mappings if it can. If anything changes, un-map everything.


*** Keywords *** 

| Verify that the following icons are present and sorted correctly
| | [Documentation]	| A keyword that verifies that a set of icons, on the same element, are present and in the specified order
| | [ARGUMENTS]		| @{ExpectedFields}
| | ${ExpectedXpath} | Set Variable  | xpath=//*[@id='${ExpectedFields[0]}']
| | Page Should Contain Element | ${ExpectedXpath}  | Could not find the first icon.
| | ${FieldCount} | Get Length  | ${ExpectedFields}
| | :FOR  | ${i}  | IN RANGE  | 1 | ${FieldCount}
| | | ${ExpectedXpath}= | Set Variable   | ${ExpectedXpath}/following-sibling::*[@id='${ExpectedFields[0]}']
| | | Page should contain element  | ${ExpectedXpath} | The icons are not in the desired order.

| Go to Step 3 of the Create Integration Point Process
| | Open Create Integration Point
| | Fill out the Following Fields of the Integration Point Step 1 form | Step 2 Testing | Append/Overlay | LDAP | Custodian | no
| | Fill out the Following Fields of the Integration Point Step 2 form | ${ValidConnectionPath}

*** Settings ***
| Library	| ${KEYWORD_DIR}/ManualKeywords.py
| Library	| ${KEYWORD_DIR}/kWebDriver.py
| Resource	| ${METHOD_KEYWORD_DIR}/MiscMethodKeywords.txt
| Resource	| ${METHOD_KEYWORD_DIR}/NavigationKeywords.txt
| Resource  | C:/SourceCode/LDAPSync/QA/Keywords/IntegrationPointKeywords.txt
