
*** Settings ***
| Documentation 	| Verify that the Allow Import permission has the correct limitations.
| Metadata			| Authors	| William Sehy
| Force Tags		| in-progress	| team.method
#| Suite Setup		| Create Suite Setup Data
#| Test Teardown 	| Run Keyword if Test Failed	| Capture Page Screenshot
#| Suite Teardown	| Delete the Objects created in the Suite then Close All Browsers


*** Variables ***

| ${WorkspaceName}	| Not LDAP Sync
| ${Group1}			| 
| ${Group2}			| 
| ${User1}			| 
| ${User2}			| 


*** Test Cases ***

| Users without the Allow Import permission cannot Create an Integration Point
| | [Documentation] | Verify that Users without the Allow Import permission cannot Create 
| | ...				| an Integration Point because they are stopped at Step 1.
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group1}"
| | ... | 2. The User Group "${Group1}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group1}" does not have the "Allow Import" permission
| | ... | 4. The Relativity User "${User1}" is only in the User Group "${Group1}" 
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User1}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. Click	| New Integration Point
| | ... | 5. Attempt to get to Step 2 of the Integration Point wizard
| | ... | 
| | ... | Expected Results:
| | ... | 1. The New Integration Point page has an error banner with the following text	| Whatever.
| | ... | 2. You cannot progress to Step 2 of the Integration Point wizard


| Users without the Allow Import permission cannot Import Now
| | [Documentation] | Verify that Users without the Allow Import permission cannot see the Import Now button.
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group1}"
| | ... | 2. The User Group "${Group1}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group1}" does not have the "Allow Import" permission
| | ... | 4. The Relativity User "${User1}" is only in the User Group "${Group1}"
| | ... | 5. The Workspace "${WorkspaceName}" has an Integration Point
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User1}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. View any Integration Point
| | ... | 
| | ... | Expected Results:
| | ... | Verify that the Integration Point Layout does not show the Import Now button


| Users with the Allow Import permission can Create an Integration Point
| | [Documentation] | Verify that Users with the Allow Import permission can Create 
| | ...				| an Integration Point and are not stopped at Step 1.
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group2}"
| | ... | 2. The User Group "${Group2}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group2}" does have the "Allow Import" permission
| | ... | 4. The Relativity User "${User2}" is only in the User Group "${Group2}"
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User2}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. Click	| New Integration Point
| | ... | 5. Attempt to get to Step 2 of the Integration Point wizard
| | ... | 
| | ... | Expected Results:
| | ... | 1. The New Integration Point Step 1 page has no error banner
| | ... | 2. You can progress to Step 2 of the Integration Point wizard


| Users with the Allow Import permission can Import Now
| | [Documentation] | Verify that Users with the Allow Import permission can see the Import Now button and use it without issue.
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group2}"
| | ... | 2. The User Group "${Group2}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group2}" does have the "Allow Import" permission
| | ... | 4. The Relativity User "${User2}" is only in the User Group "${Group2}"
| | ... | 5. The Workspace "${WorkspaceName}" has an Integration Point
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User2}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. View any Integration Point
| | ... | 5. Run Import Now
| | ... | 
| | ... | Expected Results:
| | ... | 1. Verify that the Integration Point Layout does show the Import Now button
| | ... | 2. Verify that the Import Now operation succeeds


| The Allow Import Permission works with DBMT'd Users 
| | [Documentation] | Verify that Users DBMT'd into the environment work correctly with the Allow Import permission.
| | [Tags]			| manual	| permissions	| dbmt
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Re-run "Users without the Allow Import permission cannot Create an Integration Point" using a DBMT'ed User
| | ... | 2. Re-run "Users without the Allow Import permission cannot Import Now" using a DBMT'ed User
| | ... | 3. Re-run "Users with the Allow Import permission can Create an Integration Point" using a DBMT'ed User
| | ... | 4. Re-run "Users with the Allow Import permission can Import Now" using a DBMT'ed User
| | ... | 
| | ... | Expected Results:
| | ... | Verify that DBMT'd Users work correctly with the Allow Import permission


*** Settings ***
| Library	| ${KEYWORD_DIR}/ManualKeywords.py
| Library	| ${KEYWORD_DIR}/kWebDriver.py