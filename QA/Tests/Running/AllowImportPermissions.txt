
*** Settings ***
| Documentation 	| Verify that the Allow Import permission has the correct limitations.
| Metadata			| Authors	| William Sehy  | Daniel Oliver
| Force Tags		| in-progress	| team.game_of_holds	| feature.integration_points
#| Suite Setup		| Create Suite Setup Data
#| Test Teardown 	| Run Keyword if Test Failed	| Capture Page Screenshot
#| Suite Teardown	| Delete the Objects created in the Suite then Close All Browsers


*** Variables ***

| ${WorkspaceName}	| Not LDAP Sync
| ${Group1}			| Group with Permissions
| ${Group2}			| Group without Permissions
| ${User1}			| User, with Permission
| ${User2}			| User, without Permission


*** Test Cases ***

| Users without the Allow Import permission cannot Create an Integration Point
| | [Documentation] | Verify that Users without the Allow Import permission cannot Create 
| | ...				| an Integration Point because they are stopped at Step 1.
| | ... | [id] 3c470be1-bd06-11e4-8a16-90b11c6c5ae4
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group1}"
| | ... | 2. The User Group "${Group1}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group1}" does not have the "Allow Import" permission
| | ... | 4. The Relativity User "${User1}" is only in the User Group "${Group1}" 
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User1}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. Click	| New Integration Point
| | ... | 5. Attempt to get to Step 2 of the Integration Point wizard
| | ... | 
| | ... | Expected Results:
| | ... | 1. The New Integration Point page has an error banner with the following text	| You do not have permission to import. Please contact your administrator for the correct permissions.
| | ... | 2. Verify the Cancel button is present
| | ... | 3. Verify that Clicking Cancel returns you to the Integration Points List view

| Users without the Allow Import permission cannot Import Now
| | [Documentation] | Verify that Users without the Allow Import permission cannot see the Import Now button.
| | ... | [id] 429238d1-bd06-11e4-a849-90b11c6c5ae4
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group1}"
| | ... | 2. The User Group "${Group1}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group1}" does not have the "Allow Import" permission
| | ... | 4. The Relativity User "${User1}" is only in the User Group "${Group1}"
| | ... | 5. The Workspace "${WorkspaceName}" has an Integration Point
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User1}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. View any Integration Point
| | ... | 
| | ... | Expected Results:
| | ... | 1. Verify that the IMPORT card shows the Import Now button in a disabled state
| | ... | 2. Verify that the Import Now button is not clickable
| | ... | 3. Verify that hovering over the Import Now buttons shows the hover text of "You do not have permission to import."

| Users with the Allow Import permission can Create an Integration Point
| | [Documentation] | Verify that Users with the Allow Import permission can Create 
| | ...				| an Integration Point and are not stopped at Step 1.
| | ... | [id] 4870e84f-bd06-11e4-8811-90b11c6c5ae4
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group2}"
| | ... | 2. The User Group "${Group2}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group2}" does have the "Allow Import" permission
| | ... | 4. The Relativity User "${User2}" is only in the User Group "${Group2}"
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User2}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. Click	| New Integration Point
| | ... | 5. Attempt to get to Step 2 of the Integration Point wizard
| | ... | 
| | ... | Expected Results:
| | ... | 1. The New Integration Point Step 1 page has no error banner
| | ... | 2. You can progress to Step 2 of the Integration Point wizard

| Users with the Allow Import permission can Import Now
| | [Documentation] | Verify that Users with the Allow Import permission can see the Import Now button and use it without issue.
| | ... | [id] 4d119991-bd06-11e4-a0fb-90b11c6c5ae4
| | [Tags]			| manual	| permissions
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. The Workspace "${WorkspaceName}" has the User Group "${Group2}"
| | ... | 2. The User Group "${Group2}" has all Permissions for the Integration Points object and tabs
| | ... | 3. The User Group "${Group2}" does have the "Allow Import" permission
| | ... | 4. The Relativity User "${User2}" is only in the User Group "${Group2}"
| | ... | 5. The Workspace "${WorkspaceName}" has an Integration Point
| | ... | 
| | ... | Steps:
| | ... | 1. Log in to Relativity as ${User2}
| | ... | 2. Go to the Workspace	| ${WorkspaceName}
| | ... | 3. Go to the Tab	| Integration Points
| | ... | 4. View any Integration Point
| | ... | 5. Run Import Now
| | ... | 
| | ... | Expected Results:
| | ... | 1. Verify that the Integration Point Layout shows the enabled Import Now button
| | ... | 2. Verify that the Import Now operation succeeds

| The Allow Import Permission works with DBMT'd Users 
| | [Documentation] | Verify that Users DBMT'd into the environment work correctly with the Allow Import permission.
| | ... | [id] 51f9db1e-bd06-11e4-a96e-90b11c6c5ae4
| | [Tags]			| manual	| permissions	| dbmt
| | Run the following manual steps:
| | ... | Steps:
| | ... | 1. Re-run "Users without the Allow Import permission cannot Create an Integration Point" using a DBMT'ed User
| | ... | 2. Re-run "Users without the Allow Import permission cannot Import Now" using a DBMT'ed User
| | ... | 3. Re-run "Users with the Allow Import permission can Create an Integration Point" using a DBMT'ed User
| | ... | 4. Re-run "Users with the Allow Import permission can Import Now" using a DBMT'ed User
| | ... | 
| | ... | Expected Results:
| | ... | Verify that DBMT'd Users work correctly with the Allow Import permission

*** Settings ***
| Library	| ${KEYWORD_DIR}/ManualKeywords.py
| Library	| ${KEYWORD_DIR}/kWebDriver.py