
*** Settings ***
| Documentation 	| Verify that the Integration Points work correctly when multiple Jobs with different Source Providers are run together from different Workspaces.
| Metadata		    | Authors	| William Sehy
| Force Tags		| in-progress	| team.game_of_holds	| feature.integration_points	| manual


*** Variables ***

| ${WorkspaceName1}		| Temporary Workspace 1
| ${WorkspaceName2}		| Temporary Workspace 2
| ${IntegrationPoint1}	| LDAP Concurrency	| # LDAP
| ${IntegrationPoint2}	| FTP Concurrency	| # FTP


*** Test Cases ***

| Importing using both FTP and LDAP at the same time
| | [Tags]			| manual
| | Run the following manual steps:
| | ... | Preconditions:
| | ... | 1. ${IntegrationPoint1} uses LDAP to import
| | ... | 2. ${IntegrationPoint1} has [X] Records to import
| | ... | 3. ${IntegrationPoint1} is on ${Workspace1}
| | ... | 4. ${IntegrationPoint2} uses FTP to import
| | ... | 5. ${IntegrationPoint2} has [Y] Records to import
| | ... | 6. ${IntegrationPoint2} is on ${Workspace2}
| | ... | 
| | ... | Steps:
| | ... | 1. Schedule both ${IntegrationPoint1} and ${IntegrationPoint2} to import five minutes from now (at the same time)
| | ... | 2. Wait until the Jobs finish
| | ... | 
| | ... | Expected Results:
| | ... | 1. Verify that the ${IntegrationPoint1} imported all [X] Objects into ${Workspace1} correctly
| | ... | 2. Verify that none of ${IntegrationPoint2}'s objects were imported into ${Workspace1}
| | ... | 3. Verify that the ${IntegrationPoint2} imported all [Y] Objects into ${Workspace2} correctly
| | ... | 4. Verify that none of ${IntegrationPoint1}'s objects were imported into ${Workspace2}


*** Keywords ***

| Create LDAP Integration Point
# This LDAP Integration Point should generate 73 records
| | Fill out the Following Fields of the Integration Point Step 1 form | ${IntegrationName1}	| LDAP	| Custodian	| No
| | Proceed to the Next Step of the Integration Point wizard
| | Fill out the Following Fields of the LDAP Integration Point Step 2 form	| 
| | ... | ConnectionPath=testing.corp/CN=Users,DC=testing,DC=corp
| | ... | ObjectFilterString=(objectClass=*)
| | ... | Authentication=FastBind
| | ... | ConnectionUsername=testing\\administrator	| # Single slash when entering manually
| | ... | ConnectionPassword=P@ssw0rd@1
| | ... | ImportNestedItems=Yes
| | Proceed to the Next Step of the Integration Point wizard
| | Map the Following Fields on the Integration Point Step 3 form | 
| | ... | First Name	| givenName
| | ... | Last Name		| sn
| | ... | Email			| mail
| | ... | Department	| countrycode
| | ... | Unique ID		| objectguid
| | Select from select2 Dropdown	| s2id_overwrite			| Append Only
| | Select from select2 Dropdown	| s2id_overlay-identifier	| UniqueID
| | Click	| Save

| Create FTP Integration Point
# This FTP Integration Point should generate 5 records
| | Fill out the Following Fields of the Integration Point Step 1 form | ${IntegrationPoint2}	| FTP (CSV File) | Custodian | No
| | Proceed to the Next Step of the Integration Point wizard
| | Fill out the Following Fields of the FTP Integration Point Step 2 form	| 
| | ... | Host=files.kcura.com
| | ... | Protocol=FTP
| | ... | Port=21
| | ... | Username=rip
| | ... | Password=GameOfHolds
| | ... | Filepath=/ftp/LegalHold/AppendFTP.csv
| | Proceed to the Next Step of the Integration Point wizard
| | Map the Following Fields on the Integration Point Step 3 form | 
| | ... | UniqueID		| unique_id
| | ... | First Name	| FirstName
| | ... | Last Name		| LastName
| | ... | Email			| Email
| | Select from select2 Dropdown	| s2id_overwrite			| Append Only
| | Select from select2 Dropdown	| s2id_overlay-identifier	| UniqueID
| | Click	| Save


*** Settings ***
| Library	| ${KEYWORD_DIR}/ManualKeywords.py
| Library	| ${KEYWORD_DIR}/kWebDriver.py