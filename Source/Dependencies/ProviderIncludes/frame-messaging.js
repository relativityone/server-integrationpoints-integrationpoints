!function(t,n){var e=function(){var t={};return{get:function(){return t},set:function(n){t=n}}}(),i=function(){var t=this;n.receiveMessage(function(n){var e=t.destination.get()||{},i={};try{i=JSON.parse(n.data)}catch(n){}if("undefined"!=typeof i)for(var a=e[i.name]||[],r=0;r<a.length;r++){var o=a[r];o.call(t,i.data)}})};t.frameMessaging=function(){var t=function(t){this.dFrame=t.destination,this.destination=e,i.call(this)};return t.prototype.subscribe=function(t,n){var e=this.destination.get()||{};"undefined"==typeof e[t]&&(e[t]=[]),e[t].push(n),this.destination.set(e)},t.prototype.publish=function(t,e){var i=JSON.stringify({name:t,data:e});n.postMessage(i,this.dFrame.location.href,this.dFrame)},function(e){var i=n.extend({},{destination:window.parent.contentWindow||(window.parent.frameElement||{}).contentWindow},e);return new t(i)}}()}(IP,jQuery);