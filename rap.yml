trigger:
  branches:
    include:
    - '*'

variables:
  unregister.opt-in: true
  DisableNuGetWarning: 'NU1604'

stages:
- template: rapci-server.yml@azdo_templates  # Template reference
  parameters:
    RelativityBranch: ''
    TemplateName: 'aio-server-2023-ga'
    buildSteps:
      - checkout: self
      - checkout: azdo_templates
      - task: DotNetCoreCLI@2
        displayName: 'Build'
        inputs:
          command: 'build'
          projects: '**/*.csproj'
          msbuildArguments: '/p:NoWarn=$(DisableNuGetWarning)'

resources:
  repositories:
    - repository: azdo_templates
      type: github
      name: relativityone/azdo-templates
      endpoint: relativityone
      ref: 'refs/heads/main'