<script id="exportProviderSettingsStep" type="text/html">
<div id="_main">
<div id="exportProviderConfiguration" style="min-width: 900px;">
<div class="card">
	<span class="label">Export Detail</span>
	<table style="width: 100%;">
		<tr>
			<td style="width: 48%;">
				<div class="field-row">
					<div class="field-label required">
						Export Type:
					</div>
					<div class="field-value">
						<ul>
							<li>
								<div class="field-value">
									<input id="export-loadfile-checkbox" type="checkbox" disabled="true" checked="true"/>
									<label disabled="true">Load File</label>
								</div>
							</li>
							<li>
								<div class="field-value">
									<input id="export-images-checkbox" type="checkbox" data-bind="disable: HasBeenRun(), checked: ExportImages"/>
									<label>Images</label>
								</div>
							</li>
							<li>
								<div class="field-value">
									<input id="export-natives-checkbox" type="checkbox" data-bind="disable: HasBeenRun(), checked: ExportNatives"/>
									<label>Natives</label>
								</div>
							</li>
							<li>
								<div class="field-value">
									<input id="export-text-fields-as-files-checkbox" type="checkbox" data-bind="disable: HasBeenRun(), checked: ExportTextFieldsAsFiles"/>
									<label>Text Fields As Files</label>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</td>
			<td style="vertical-align: top;">
				<div class="field-row">
					<div class="field-label">
						Overwrite files:
					</div>
					<div class="field-value middle-vertical-align">
						<input id="overwrite-file-checkbox" type="checkbox" data-bind="disable: HasBeenRun(), checked: OverwriteFiles" class="middle-vertical-align" />
					</div>
				</div>
			</td>
			</tr>
					<tr>
						<td style="width: 48%;">
							<div class="field-row">
								<div class="field-label required">
									Processing Source:
								</div>
								<div class="field-value select2-double-width">
									<select class="fluid-mock-select" id="processingSources" data-bind="optionsText: 'location', optionsValue: 'artifactId', options: ProcessingSourceLocationList, optionsCaption: 'Select...', value: ProcessingSourceLocation, disable: HasBeenRun(), select2: { width: '100%' }"></select>
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Destination Folder:
								</div>
								<div class="field-value select2-double-width">
									<div id="location-select" class="select2-container fluid-mock-select filter-container">
										<input id="location-input" type="text" readonly='readonly' placeholder="Select..." data-bind="value: Fileshare" />
										<span id="location-span" class="icon legal-hold icon-chevron-down" role="presentation"></span>																																																					
									</div>
									<div id="jstree-holder-div" class="jstree-holder browse">
										<div id="browser-tree" tabindex="0"></div>
									</div>																		
								</div>								
							</div>
						</td>
					</tr>
				</table>
			</div>

			<div class="card" data-bind="visible: IsVolumeAndSubdirectioryDetailVisible()">
				<div id="subdirectory_accordion" style="cursor: pointer;">
					<span class="label" style="display: inline-block;">Volume & Subdirectory Detail</span>
					<img class="collapsed_arrow" src="/Relativity/images/arrow_collapsed.png" alt="" style="display: none; vertical-align: text-bottom;" />
					<img class="expanded_arrow" src="/Relativity/images/arrow_expanded.png" alt="" style="vertical-align: text-bottom;" />
				</div>
				<table style="width: 100%; display: none;">
					<tr>
						<td style="vertical-align: text-top; width: 48%;">
							<div>
								<p>
									<h3 style="margin-left: 30px">
										VOLUME
									</h3>
								</p>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Prefix:
								</div>
								<div class="field-value">
									<input id="volume-prefix-input" type="text" data-bind="value: VolumePrefix, disable: HasBeenRun()" />
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Start Number:
								</div>
								<div class="field-value">
									<input id="volume-start-files-input" type="number" data-bind="value: VolumeStartNumber, disable: HasBeenRun()" />
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Number of digits:
								</div>
								<div class="field-value">
									<input id="volume-digit-padding-input" type="number" data-bind="value: VolumeDigitPadding, disable: HasBeenRun()" />
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Max Size (MB):
								</div>
								<div class="field-value">
									<input id="volume-max-size-input" type="number" data-bind="value: VolumeMaxSize, disable: HasBeenRun()" />
								</div>
							</div>
						</td>
						<td style="vertical-align: text-top;">
							<div class="field-row">
								<p>
									<h3 style="margin-left: 30px">
										SUBDIRECTORY
									</h3>
								</p>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Start Number:
								</div>
								<div class="field-value">
									<input id="subdirectory-start-files-input" type="number" data-bind="value: SubdirectoryStartNumber, disable: HasBeenRun()" />
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Number of digits:
								</div>
								<div class="field-value">
									<input id="subdirectory-digit-padding-input" type="number" data-bind="value: SubdirectoryDigitPadding, disable: HasBeenRun()" />
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Max Files:
								</div>
								<div class="field-value">
									<input id="subdirectory-max-files-input" type="number" data-bind="value: SubdirectoryMaxFiles, disable: HasBeenRun()" />
								</div>
							</div>
						</td>
					</tr>
				</table>
			</div>

			<div class="card">
				<span class="label">Output Settings</span>
				<table style="width: 100%;">
					<tr>
						<td style="vertical-align: text-top; width: 48%;">
							<div class="field-row">
								<div class="field-label required">
									Image File Format:
								</div>
								<div class="field-value">
									<select id="imageDataFileFormatSelector" data-bind="options: ImageFileFormatList, optionsText: 'key', optionsValue: 'value', value: SelectedImageDataFileFormat, disable: HasBeenRun(), select2: {}"></select>
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Data File Format:
								</div>
								<div class="field-value">
									<select id="dataFileFormatSelector" data-bind="optionsText: 'key', optionsValue: 'value', options: ExportEnums.DataFileFormats, optionsCaption: 'Select...', value: SelectedDataFileFormat, disable: HasBeenRun(), select2: {}"></select>
								</div>
							</div>
							<div class="field-row" data-bind="visible: isCustom">
								<div class="field-label">
									Column:
								</div>
								<div class="field-value">
									<select id="columnSeparatorSelector" data-bind="enable: isCustom() && !HasBeenRun(), optionsText: 'key', optionsValue: 'value', options: separatorsList, optionsCaption: 'Select...', attr: {'disabled': isCustomDisabled()}, value: ColumnSeparator, select2: {}"></select>
								</div>
							</div>
							<div class="field-row" data-bind="visible: isCustom">
								<div class="field-label">
									Quote:
								</div>
								<div class="field-value">
									<select id="quoteSeparatorSelector" data-bind="enable: isCustom() && !HasBeenRun(), optionsText: 'key', optionsValue: 'value', options: separatorsList, optionsCaption: 'Select...', attr: {'disabled': isCustomDisabled()}, value: QuoteSeparator, select2: {}"></select>
								</div>
							</div>
							<div class="field-row" data-bind="visible: isCustom">
								<div class="field-label">
									Newline:
								</div>
								<div class="field-value">
									<select id="newlineSeparatorSelector" data-bind="enable: isCustom() && !HasBeenRun(), optionsText: 'key', optionsValue: 'value', options: separatorsList, optionsCaption: 'Select...', attr: {'disabled': isCustomDisabled()}, value: NewlineSeparator, select2: {}"></select>
								</div>
							</div>
							<div class="field-row" data-bind="visible: isCustom">
								<div class="field-label">
									Multi-Value:
								</div>
								<div class="field-value">
									<select id="multivalueSeparatorSelector" data-bind="enable: isCustom() && !HasBeenRun(), optionsText: 'key', optionsValue: 'value', options: separatorsList, optionsCaption: 'Select...', attr: {'disabled': isCustomDisabled()}, value: MultiValueSeparator, select2: {}"></select>
								</div>
							</div>
							<div class="field-row" data-bind="visible: isCustom">
								<div class="field-label">
									Nested Value:
								</div>
								<div class="field-value">
									<select id="nestedvalueSeparatorSelector" data-bind="enable: isCustom() && !HasBeenRun(), optionsText: 'key', optionsValue: 'value', options: separatorsList, optionsCaption: 'Select...', attr: {'disabled': isCustomDisabled()}, value: NestedValueSeparator, select2: {}"></select>
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									Data File Encoding:
								</div>
								<div class="field-value">
									<select id="dataFileEncodingSelector" data-bind="value: DataFileEncodingType, disable: HasBeenRun(), select2searchable: {}">
										<option data-bind="value: ''">Select...</option>
										<!-- ko foreach: FileEncodingTypeList -->
											<optgroup data-bind="attr: {label: label}, foreach: children">
												<option data-bind="text: displayName, value: name"></option>
											</optgroup>
										<!-- /ko -->
									</select>
								</div>
							</div>
							<div class="field-row">
								<div class="field-label required">
									File Path:
								</div>
								<div class="field-value">
									<ul data-bind="foreach: ExportEnums.FilePathType">
										<li>
											<input type="radio" name="filePath" data-bind="checked: $parent.FilePath, checkedValue: $data.value, attr: {id: 'filePath_' + $index() }, disable: $parent.HasBeenRun" />
											<label data-bind="text: key, attr: {id: 'filePathLabel_' + $index() }"></label>
											<!-- ko if: value==2 -->
											<input type="text" data-bind="enable: $parent.isUserPrefix() && !$parent.HasBeenRun(), value: $parent.UserPrefix, attr: { id: 'filePathUserprefix_' + $index() }" />
											<!-- /ko -->
										</li>
									</ul>
								</div>
							</div>
							<div class="field-row">
								<div class="field-label">
									Include Native Files Path:
								</div>
								<div class="field-value middle-vertical-align">
									<input id="include-native-files-path-checkbox" type="checkbox" data-bind="disable: HasBeenRun() || ExportNatives(), checked: IncludeNativeFilesPath" class="middle-vertical-align" />
								</div>
							</div>
							<div class="field-row">
								<div class="field-label">
									Export Multiple Choice<br />Fields As Nested:
								</div>
								<div class="field-value middle-vertical-align">
									<input id="export-multiple-choice-fields-as-nested" type="checkbox" data-bind="disable: HasBeenRun(), checked: ExportMultipleChoiceFieldsAsNested" class="middle-vertical-align" />
								</div>
							</div>
						</td>
						<td style="vertical-align: text-top;">
							<div data-bind="visible: ExportImages">
								<div class="field-row">
									<p>
										<h3 style="margin-left: 30px">
											IMAGE
										</h3>
									</p>
								</div>								
								<div class="field-row">
									<div class="field-label required">
										File Type:
									</div>
									<div class="field-value">
										<select id="imageFileTypesSelector" data-bind="enable: ExportNatives && !HasBeenRun(), options: ExportEnums.ImageFileTypes, optionsText: 'key', optionsValue: 'value', value: SelectedImageFileType, select2: {}"></select>
									</div>
								</div>
								<div class="field-row">
									<div class="field-label required">
										Production Precedence:
									</div>
									<div class="field-value">
										<select id="image-production-precedence" data-bind="disable: HasBeenRun(), options: ExportEnums.ProductionPrecedenceType, optionsText: 'key', optionsValue: 'value', value: ProductionPrecedence, disable: HasBeenRun(), select2: {}"></select>
									</div>
								</div>
								<div class="field-row" data-bind="visible: IsProductionPrecedenceSelected()">
									<div class="field-label required">
										Image Productions:
									</div>
									<div class="field-value">
										<label id="image-production-selection" data-bind="text: ImagePrecedenceSelection"></label>
										<button id="image-production-precedence-button" data-bind="click: openImageProductionPicker, disable: HasBeenRun()" class="actionButtonSmall">...</button>
										<input id="image-production-precedence-input" data-bind="value: ImagePrecedence, visible: false" />
									</div>
								</div>
								<div class="field-row" data-bind="visible: IsProductionPrecedenceSelected()">
									<div class="field-label">
										Include original images if not produced:
									</div>
									<div class="field-value">
										<input id="image-include-original-images-checkbox" type="checkbox" data-bind="disable: HasBeenRun(), checked: IncludeOriginalImages" />
									</div>
								</div>
								<div class="field-row">
									<div class="field-label required">
										Subdirectory Prefix For Image:
									</div>
									<div class="field-value">
										<input id="subdirectory-image-prefix-input" type="text" data-bind="value: SubdirectoryImagePrefix, disable: HasBeenRun()" />
										<span id="subdirectory-image-padding-text" style="padding: 2px" data-bind="text: SubdirectoryDigitText"></span>
									</div>
								</div>
							</div>
							<div data-bind="visible: ExportNatives">
								<div>
									<p>
										<h3 style="margin-left: 30px">
											NATIVE
										</h3>
									</p>
								</div>
								<div class="field-row">
									<div class="field-label required">
										Subdirectory prefix for Native:
									</div>
									<div class="field-value">
										<input id="subdirectory-native-prefix-input" type="text" data-bind="value: SubdirectoryNativePrefix, disable: HasBeenRun()" />
										<span id="subdirectory-native-padding-text" style="padding: 2px" data-bind="text: SubdirectoryDigitText"></span>
									</div>
								</div>
							</div>
							<div data-bind="visible: ExportTextFieldsAsFiles">
								<div>
									<p>
										<h3 style="margin-left: 30px">
											TEXT
										</h3>
									</p>
								</div>
								<div class="field-row">
									<div class="field-label required">
										Text File Encoding:
									</div>
									<div class="field-value">
										<select id="textFileEncodingSelector" data-bind="value: TextFileEncodingType, disable: HasBeenRun(), select2searchable: {}">
											<option data-bind="value: ''">Select...</option>
											<!-- ko foreach: FileEncodingTypeList -->
												<optgroup data-bind="attr: {label: label}, foreach: children">
													<option data-bind="text: displayName, value: name"></option>
												</optgroup>
											<!-- /ko -->
										</select>
									</div>
								</div>
								<div class="field-row">
									<div class="field-label required">
										Text Precedence:
									</div>
									<div class="field-value">
										<label id="text-precedence-selection" data-bind="text: TextPrecedenceSelection"></label>
										<button id="text-precedence-button" data-bind="click: openTextPrecedencePicker, disable: HasBeenRun()" class="actionButtonSmall">...</button>
										<input id="text-precedence-input" data-bind="value: TextPrecedenceFields, visible: false" />
									</div>
								</div>
								<div class="field-row">
									<div class="field-label required">
										Subdirectory prefix for Text:
									</div>
									<div class="field-value">
										<input id="subdirectory-text-prefix-input" type="text" data-bind="value: SubdirectoryTextPrefix, disable: HasBeenRun()" />
										<span id="subdirectory-text-padding-text" style="padding: 2px" data-bind="text: SubdirectoryDigitText"></span>
									</div>
								</div>
							</div>
						</td>
					</tr>
				</table>
			</div>
			<div style="height: 15px;"></div>
		</div>
	</div>
</script>
<script>
$('#bodyContainer').off('click', '#subdirectory_accordion');
$('#bodyContainer').on('click', '#subdirectory_accordion', function() {
	$header = $(this);
	$content = $header.next();

	$content.slideToggle(0, function(){
		$header.find('.collapsed_arrow').slideToggle(0);
		$header.find('.expanded_arrow').slideToggle(0);
	});
});
</script>
